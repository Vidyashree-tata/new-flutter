trigger:
- main  # or your branch name

pool:
  name: 'Default'  # Replace with your self-hosted agent pool name

variables:
  buildDir: '$(Build.SourcesDirectory)/app/build/outputs/apk/release'

steps:
- task: Gradle@2
  inputs:
    workingDirectory: ''
    gradleWrapperFile: 'gradlew'
    gradleOptions: '-Xmx3072m'
    tasks: 'assembleRelease'

- task: CopyFiles@2
  inputs:
    contents: '**/*.apk'
    targetFolder: '$(Build.ArtifactStagingDirectory)'

- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'apk'
    publishLocation: 'Container'
